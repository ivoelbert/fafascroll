(this.webpackJsonpfafascroll=this.webpackJsonpfafascroll||[]).push([[0],{20:function(e,t,n){e.exports=n(31)},25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),a=n(15),o=n.n(a),c=(n(25),n(12)),s=n(5),l=function(e,t,n){return d(h(e,t,n,0,1),0,1)},u=function(e,t,n){return d(h(e,t,n,0,1),0,1)},d=function(e,t,n){return Math.min(Math.max(e,t),n)},h=function(e,t,n,i,r){return(e-t)*(r-i)/(n-t)+i},f=function(e){return--e*e*e+1},m={getHeight:function(){throw new Error("Can't use context outside ScrollerProvider")},addSection:function(e,t){throw new Error("Can't use context outside ScrollerProvider")},isSectionVisible:function(e){throw new Error("Can't use context outside ScrollerProvider")},scrollerRef:null},v=r.a.createContext(m),w=function(e){var t=e.children,n=Object(i.useState)([]),a=Object(s.a)(n,2),o=a[0],l=a[1],u=function(){var e=Object(i.useState)(0),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(i.useCallback)((function(e){var t=window.scrollY;r(t)}),[]);return Object(i.useEffect)((function(){return window.addEventListener("scroll",a),function(){window.removeEventListener("scroll",a)}}),[a]),n}(),f=function(){var e=Object(i.useState)(window.innerHeight),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(i.useCallback)((function(e){r(window.innerHeight)}),[]);return Object(i.useEffect)((function(){return window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}}),[a]),n}(),m=Object(i.useRef)(null),w={getHeight:Object(i.useCallback)((function(){var e=o.length>0?o[o.length-1].height:0;return f+e}),[o,f]),addSection:function(e,t){o.find((function(t){return t.name===e}))||l((function(n){var i=(n.length>0?n[n.length-1].height:0)+t;return[].concat(Object(c.a)(n),[{name:e,height:i}])}))},isSectionVisible:function(e){if(0===o.length)return[!1,0];var t,n=m.current?function(e){for(var t=0;e;)t+=e.offsetTop+e.clientTop,e=e.offsetParent;return t}(m.current):0,i=u-n,r=o.findIndex((function(t){return t.name===e})),a=o[r],c=0===r?0:o[r-1].height;switch(r){case 0:t=i<a.height;break;case o.length-1:t=i>c;break;default:t=i>c&&i<a.height}return[t,d(h(i,c,a.height,0,1),0,1)]},scrollerRef:m};return r.a.createElement(v.Provider,{value:w},t)},b=function(){return Object(i.useContext)(v)},p=(n(26),function(e){var t=e.children,n=e.className,i=void 0===n?"":n;return r.a.createElement(w,null,r.a.createElement(g,{className:i},t))}),g=function(e){var t=e.children,n=e.className,i=b(),a=i.getHeight,o=i.scrollerRef,c=a();return r.a.createElement("div",{ref:o,className:"fafascroller-container ".concat(n),style:{height:c}},t)},E=r.a.createContext({relativePosition:0,absolutePosition:0}),O=function(e){var t=e.children,n={relativePosition:e.relativePosition,absolutePosition:e.absolutePosition};return r.a.createElement(E.Provider,{value:n},t)},j=n(19).a.div({visible:{opacity:1},hidden:{opacity:0}}),x=function(e){var t=e.children,n=e.duration,i=e.name,a=b(),o=a.addSection,c=a.isSectionVisible;o(i,n);var l=c(i),u=Object(s.a)(l,2),d=u[0],h=u[1],f=n*h;return r.a.createElement(j,{style:{zIndex:d?10:0},className:"sticky-section",pose:d?"visible":"hidden"},r.a.createElement(O,{relativePosition:h,absolutePosition:f},t))},P=function(){return Object(i.useContext)(E)},S=n(4),k=n.n(S),y=n(10),H=n(3),C=n(0),N=n(16),M=function e(){var t=this;Object(H.a)(this,e),this.loader=void 0,this.loadObject=function(e){return new Promise((function(n,i){var r="".concat("./models","/").concat(e,".gltf");t.loader.load(r,(function(e){n(e.scene)}),(function(){}),i)}))},this.loader=new N.a},A=function e(){var t=this;Object(H.a)(this,e),this.mesh=void 0,this.loadModels=Object(y.a)(k.a.mark((function e(){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new M,e.next=3,n.loadObject("scene");case 3:t.mesh=e.sent;case 4:case"end":return e.stop()}}),e)}))),this.mesh=new C.M},I=n(13),L=n(17),T=n(8),_=n(7),z=n(18),R={time:0,pullOutTime:0,moveAndRotateTime:0},W=function(e){Object(T.a)(n,e);var t=Object(_.a)(n);function n(){var e;return Object(H.a)(this,n),(e=t.call(this))._state=void 0,e.setState=function(t){e._state=Object(I.a)(Object(I.a)({},e._state),t),e.emit("CHANGE",e._state)},e._state=R,e}return Object(L.a)(n,[{key:"state",get:function(){return this._state}}],[{key:"getInstance",value:function(){return this._instance||(this._instance=new this)}}]),n}(z.EventEmitter);W._instance=void 0;n(28);var F=(new function e(){var t=this;Object(H.a)(this,e),this.renderer=void 0,this.scene=void 0,this.camera=void 0,this.phone=void 0,this.loadModels=Object(y.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.phone.loadModels();case 2:t.scene.add(t.phone.mesh),t.animate();case 4:case"end":return e.stop()}}),e)}))),this.animate=function(){W.getInstance().on("CHANGE",(function(e){var n=e.pullOutTime,i=e.moveAndRotateTime,r=l(n,.5,1),a=h(r,0,1,-5,-150),o=h(r,0,1,-Math.PI/2,0),c=h(i,0,1,0,-75),s=h(i,0,1,0,Math.PI/1.6);t.phone.mesh.position.set(c,0,a),t.phone.mesh.rotation.z=o,t.phone.mesh.rotation.y=s,t.renderer.render(t.scene,t.camera)}))},this.getDomElement=function(){return t.renderer.domElement},this.renderer=new C.kb,this.renderer.setSize(window.innerWidth,window.innerHeight),this.scene=new C.X,this.scene.background=(new C.f).setHSL(.6,0,1),this.scene.fog=new C.j(this.scene.background.getHex(),1,1e3);var n=new C.m(16777215,16777215,.6);n.color.setHSL(.6,1,.6),n.groundColor.setHSL(.095,1,.75),n.position.set(0,50,0),this.scene.add(n);var i=new C.g(16777215,1);i.color.setHSL(.1,1,.95),i.position.set(-1,1.75,1),i.position.multiplyScalar(30),this.scene.add(i),this.camera=new C.O(50,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0),this.phone=new A,window.addEventListener("resize",(function(){t.camera.aspect=window.innerWidth/window.innerHeight,t.camera.updateProjectionMatrix(),t.renderer.setSize(window.innerWidth,window.innerHeight),t.renderer.render(t.scene,t.camera)}),!1),this.loadModels()}).getDomElement(),V=function(){var e=P(),t=e.relativePosition,n=e.absolutePosition,i=u(n,0,1500),a=u(n,2e3,3e3);W.getInstance().setState({time:t,pullOutTime:i,moveAndRotateTime:a});var o=l(i,0,.9),c={filter:"blur(".concat(h(o,0,1,20,0),"px)"),WebkitFilter:"blur(".concat(h(o,0,1,20,0),"px)")},s={opacity:a},d=f(a),m={transform:"translateX(".concat(h(d,0,1,0,6),"em)")};return r.a.createElement("div",{className:"phone-animation-container"},r.a.createElement("div",{style:c,className:"phone-container",ref:function(e){e&&e.appendChild(F)}}),r.a.createElement("div",{style:s,className:"info-phone-container"},r.a.createElement("div",{style:m,className:"text-container"},r.a.createElement("h3",null,"I got bored."),r.a.createElement("p",null,"Time to do something else."))))},D=(n(29),function(){var e={opacity:P().relativePosition};return r.a.createElement("div",{className:"section first-section"},r.a.createElement("div",{style:e,className:"white-backdrop"}),r.a.createElement("h1",null,"0xFAFAFA"))}),G=function(){return r.a.createElement(p,{className:"scroller-container"},r.a.createElement(x,{name:"first-section",duration:1e3},r.a.createElement(D,null)),r.a.createElement(x,{name:"third-section",duration:3e3},r.a.createElement(V,null)))},J=(n(30),function(){return r.a.createElement("div",null,r.a.createElement(G,null))});o.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.628ded60.chunk.js.map