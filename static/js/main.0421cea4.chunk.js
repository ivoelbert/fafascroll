(this.webpackJsonpfafascroll=this.webpackJsonpfafascroll||[]).push([[0],{18:function(e,t,n){e.exports=n(29)},23:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(13),o=n.n(a),c=(n(23),n(11)),s=n(5),l=function(e,t,n){return d(h(e,t,n,0,1),0,1)},u=function(e,t,n){return d(h(e,t,n,0,1),0,1)},d=function(e,t,n){return Math.min(Math.max(e,t),n)},h=function(e,t,n,r,i){return(e-t)*(i-r)/(n-t)+r},f=function(e){return--e*e*e+1},m={getHeight:function(){throw new Error("Can't use context outside ScrollerProvider")},addSection:function(e,t){throw new Error("Can't use context outside ScrollerProvider")},isSectionVisible:function(e){throw new Error("Can't use context outside ScrollerProvider")},scrollerRef:null},v=i.a.createContext(m),b=function(e){var t=e.children,n=Object(r.useState)([]),a=Object(s.a)(n,2),o=a[0],l=a[1],u=function(){var e=Object(r.useState)(0),t=Object(s.a)(e,2),n=t[0],i=t[1],a=Object(r.useCallback)((function(e){var t=window.scrollY;i(t)}),[]);return Object(r.useEffect)((function(){return window.addEventListener("scroll",a),function(){window.removeEventListener("scroll",a)}}),[a]),n}(),f=function(){var e=Object(r.useState)(window.innerHeight),t=Object(s.a)(e,2),n=t[0],i=t[1],a=Object(r.useCallback)((function(e){i(window.innerHeight)}),[]);return Object(r.useEffect)((function(){return window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}}),[a]),n}(),m=Object(r.useRef)(null),b={getHeight:Object(r.useCallback)((function(){var e=o.length>0?o[o.length-1].height:0;return f+e}),[o,f]),addSection:function(e,t){o.find((function(t){return t.name===e}))||l((function(n){var r=(n.length>0?n[n.length-1].height:0)+t;return[].concat(Object(c.a)(n),[{name:e,height:r}])}))},isSectionVisible:function(e){if(0===o.length)return[!1,0];var t,n=m.current?function(e){for(var t=0;e;)t+=e.offsetTop+e.clientTop,e=e.offsetParent;return t}(m.current):0,r=u-n,i=o.findIndex((function(t){return t.name===e})),a=o[i],c=0===i?0:o[i-1].height;switch(i){case 0:t=r<a.height;break;case o.length-1:t=r>c;break;default:t=r>c&&r<a.height}return[t,d(h(r,c,a.height,0,1),0,1)]},scrollerRef:m};return i.a.createElement(v.Provider,{value:b},t)},w=function(){return Object(r.useContext)(v)},p=(n(24),function(e){var t=e.children,n=e.className,r=void 0===n?"":n;return i.a.createElement(b,null,i.a.createElement(O,{className:r},t))}),O=function(e){var t=e.children,n=e.className,r=w(),a=r.getHeight,o=r.scrollerRef,c=a();return i.a.createElement("div",{ref:o,className:"fafascroller-container ".concat(n),style:{height:c}},t)},g=i.a.createContext({relativePosition:0,absolutePosition:0}),E=function(e){var t=e.children,n={relativePosition:e.relativePosition,absolutePosition:e.absolutePosition};return i.a.createElement(g.Provider,{value:n},t)},j=n(17).a.div({visible:{opacity:1},hidden:{opacity:0}}),P=function(e){var t=e.children,n=e.duration,r=e.name,a=w(),o=a.addSection,c=a.isSectionVisible;o(r,n);var l=c(r),u=Object(s.a)(l,2),d=u[0],h=u[1],f=n*h;return i.a.createElement(j,{style:{zIndex:d?10:0},className:"sticky-section",pose:d?"visible":"hidden"},i.a.createElement(E,{relativePosition:h,absolutePosition:f},t))},y=function(){return Object(r.useContext)(g)},S=n(4),k=n.n(S),x=n(9),H=n(3),C=n(0),N=n(14),M=function e(){var t=this;Object(H.a)(this,e),this.loader=void 0,this.loadObject=function(e){return new Promise((function(n,r){var i="".concat("./models","/").concat(e,".gltf");t.loader.load(i,(function(e){n(e.scene)}),(function(){}),r)}))},this.loader=new N.a},A=function e(){var t=this;Object(H.a)(this,e),this.mesh=void 0,this.loadModels=Object(x.a)(k.a.mark((function e(){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new M,e.next=3,n.loadObject("scene");case 3:t.mesh=e.sent;case 4:case"end":return e.stop()}}),e)}))),this.mesh=new C.M},L=n(2),_=n(15),I=n(7),T=n(6),z=n(8),R=n(16);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var W={time:0,pullOutTime:0,moveAndRotateTime:0},F=function(e){function t(){var e;return Object(H.a)(this,t),(e=Object(I.a)(this,Object(T.a)(t).call(this)))._state=void 0,e.setState=function(t){e._state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(L.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e._state,{},t),e.emit("CHANGE",e._state)},e._state=W,e}return Object(z.a)(t,e),Object(_.a)(t,[{key:"state",get:function(){return this._state}}],[{key:"getInstance",value:function(){return this._instance||(this._instance=new this)}}]),t}(R.EventEmitter);F._instance=void 0;n(26);var V=(new function e(){var t=this;Object(H.a)(this,e),this.renderer=void 0,this.scene=void 0,this.camera=void 0,this.phone=void 0,this.loadModels=Object(x.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.phone.loadModels();case 2:t.scene.add(t.phone.mesh),t.animate();case 4:case"end":return e.stop()}}),e)}))),this.animate=function(){F.getInstance().on("CHANGE",(function(e){var n=e.pullOutTime,r=e.moveAndRotateTime,i=l(n,.5,1),a=h(i,0,1,-5,-150),o=h(i,0,1,-Math.PI/2,0),c=h(r,0,1,0,-75),s=h(r,0,1,0,Math.PI/1.6);t.phone.mesh.position.set(c,0,a),t.phone.mesh.rotation.z=o,t.phone.mesh.rotation.y=s,t.renderer.render(t.scene,t.camera)}))},this.getDomElement=function(){return t.renderer.domElement},this.renderer=new C.kb,this.renderer.setSize(window.innerWidth,window.innerHeight),this.scene=new C.X,this.scene.background=(new C.f).setHSL(.6,0,1),this.scene.fog=new C.j(this.scene.background.getHex(),1,1e3);var n=new C.m(16777215,16777215,.6);n.color.setHSL(.6,1,.6),n.groundColor.setHSL(.095,1,.75),n.position.set(0,50,0),this.scene.add(n);var r=new C.g(16777215,1);r.color.setHSL(.1,1,.95),r.position.set(-1,1.75,1),r.position.multiplyScalar(30),this.scene.add(r),this.camera=new C.O(50,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.set(0,0,10),this.camera.lookAt(0,0,0),this.phone=new A,window.addEventListener("resize",(function(){t.camera.aspect=window.innerWidth/window.innerHeight,t.camera.updateProjectionMatrix(),t.renderer.setSize(window.innerWidth,window.innerHeight),t.renderer.render(t.scene,t.camera)}),!1),this.loadModels()}).getDomElement(),G=function(){var e=y(),t=e.relativePosition,n=e.absolutePosition,r=u(n,0,1500),a=u(n,2e3,3e3);F.getInstance().setState({time:t,pullOutTime:r,moveAndRotateTime:a});var o=l(r,0,.9),c={filter:"blur(".concat(h(o,0,1,20,0),"px)"),WebkitFilter:"blur(".concat(h(o,0,1,20,0),"px)")},s={opacity:a},d=f(a),m={transform:"translateX(".concat(h(d,0,1,0,6),"em)")};return i.a.createElement("div",{className:"phone-animation-container"},i.a.createElement("div",{style:c,className:"phone-container",ref:function(e){e&&e.appendChild(V)}}),i.a.createElement("div",{style:s,className:"info-phone-container"},i.a.createElement("div",{style:m,className:"text-container"},i.a.createElement("h3",null,"Una banda de keta."),i.a.createElement("p",null,"Un kilo de merca escondanlo, porque el doctor va a tomarselo."))))},J=(n(27),function(){var e={opacity:y().relativePosition};return i.a.createElement("div",{className:"section first-section"},i.a.createElement("div",{style:e,className:"white-backdrop"}),i.a.createElement("h1",null,"0xFAFAFA"))}),U=function(){return i.a.createElement(p,{className:"scroller-container"},i.a.createElement(P,{name:"first-section",duration:1e3},i.a.createElement(J,null)),i.a.createElement(P,{name:"third-section",duration:3e3},i.a.createElement(G,null)))},X=(n(28),function(){return i.a.createElement("div",null,i.a.createElement(U,null))});o.a.render(i.a.createElement(X,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.0421cea4.chunk.js.map